/*
 * Bootstrap Categories
 *
 * @author Nat Zimmermann <nat@natzim.me>
 * @license MIT
 */
!function(a){a.fn.categories=function(t,n){var e=function(a){for(var n=0;n<t.length;n++)if(t[n].id==a)return n},r=function(n){var e=a('<div class="'+i.columnClass+'">');i.addable&&e.append('<div class="form-group"><button data-parent="'+n+'" class="'+i.addButtonClass+'">'+i.addButtonHtml+"</button></div>"),e.append('<ul class="'+i.selectClass+'"></ul>');for(var r=0;r<t.length;r++)category=t[r],(null===n&&!category.hasOwnProperty("parent")||category.parent==n)&&e.children("ul").append('<li data-id="'+category.id+'"><a href="#">'+category.name+"</a></li>");return s.append(e)},i=a.extend({selectClass:"nav nav-pills nav-stacked",columnClass:"col-md-4",addButtonClass:"btn btn-success",addButtonHtml:"+",editable:!1,onCategoryAdd:function(){},onSelectChange:function(){}},n),s=this;return r(),s.on("click","li",function(){a(this).siblings().removeClass("active"),a(this).addClass("active");var n=a(this),s=n.data("id");a(this).parent().parent().nextAll().remove();var d=a.grep(t,function(a){return a.parent==s}).length;d>0&&r(s);var l=e(s);i.onSelectChange(t[l],l)}),s.on("click",".btn-success",function(){var n={};n.id=0;for(var e=0;e<t.length;e++){var r=t[e];r.id>=n.id&&(n.id=r.id+1)}n.name=prompt("New category name");var s=a(this).data("parent");"undefined"!==s&&(n.parent=a(this).data("parent"));var d=a(this).parent().siblings("ul");d.append('<li data-id="'+n.id+'"><a href="#">'+n.name+"</a></li>"),t.push(n),i.onCategoryAdd(n,t.length-1)}),s}}(jQuery);
