/*
 * Bootstrap Categories
 *
 * @author Nat Zimmermann <nat@natzim.me>
 * @license MIT
 */
!function(a){a.fn.categories=function(n,t){var e=function(a){for(var t=0;t<n.length;t++)if(n[t].id==a)return t},i=function(t){var e=a('<div class="'+l.columnClass+'">');l.addable&&e.append('<div class="form-group"><button data-parent="'+t+'" class="'+l.addButtonClass+'">'+l.addButtonHtml+"</button></div>"),e.append('<ul class="'+l.selectClass+'"></ul>');for(var i=n.length,d=0;i>d;d++){var r=n[d];(null===t&&!r.hasOwnProperty("parent")||r.parent==t)&&e.children("ul").append('<li data-id="'+r.id+'"><a href="#">'+r.name+"</a></li>")}return s.append(e)},l=a.extend({selectClass:"nav nav-pills nav-stacked",columnClass:"col-md-4",addButtonClass:"btn btn-success",addButtonHtml:"+",editable:!1,onCategoryAdd:function(){},onSelectChange:function(){}},t),s=this;return i(),s.on("click","li",function(){a(this).siblings().removeClass("active"),a(this).addClass("active");var t=a(this).data("id"),s=e(t);a(this).parent().parent().nextAll().remove();for(var d=!1,r=n.length,o=0;r>o;o++)if(n[o].parent==t){d=!0;break}d&&i(t),l.onSelectChange(n[s],s)}),s.on("click",".btn-success",function(){var t=prompt("New category name");if(null!==t&&""!==t.trim()){for(var e={id:0,name:t},i=a(this).data("parent"),s=a(this).parent().siblings("ul"),d=n.length,r=0;d>r;r++)n[r].id>=e.id&&(e.id=n[r].id+1);"undefined"!==i&&(e.parent=i),s.append('<li data-id="'+e.id+'"><a href="#">'+e.name+"</a></li>"),n.push(e),l.onCategoryAdd(e,n.length-1)}}),s}}(jQuery);
